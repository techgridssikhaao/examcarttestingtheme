<style>
    .animate-one {
    z-index: -5;
    display: none;
    transition: all .5s;
  }

  .animate-two {
    display: block !important;
    transform: translate(0);
    transition: all .1s;
    z-index: 5;
    animation-name: swap;
    animation-duration: 2s;
  }

  .child-div-increase {
    height: 60rem;
  }
</style>

<script>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

 // pp_addtocart funcitons




  //cp_addtocart function
 // function processAddToCart(ref) {
 //    let productID = ref.getAttribute('data-product-id')
 //   cart.add(productID)
 //  }

  //pp_buynow function

  //
  
  
  
 
  
  
  
  
 ////////////// event listenerssssssss
 const login =  document.getElementById("login")

  // const buyNow =  document.getElementById("login")
  // const getPdf =  document.getElementById("login")


  //////login
  login.addEventListener("click", function() {

   showPopup('#LoginPopUp')

});

  
  /////add to cart 



//   document.addEventListener("DOMContentLoaded", function() {
  
//   let atc =  document.getElementById("cpAddToCart")


// if (atc != null) {
//  atc.addEventListener("click", function() {
    
//     showAddtoCartPopup('#AddToCartPopUp')

// });
  
// }




    
// });

   
  
  
  ///////////////
  

  

  // JavaScript code goes here
  
  let smsotp = '';
  let getButton ="";

 
  let mobNumber = "";

function validateLength(buttonShowAndHide, getlength) {
  const myInput = document.querySelector(getlength);
  if (myInput.value.length == 10) {
    document.getElementById(buttonShowAndHide).disabled = false;
    document.getElementById(buttonShowAndHide).style.opacity = "1";
  } else {
    document.getElementById(buttonShowAndHide).disabled = true;
    document.getElementById(buttonShowAndHide).style.opacity = "0.5";
  }
}

function randomOtp(){

    smsotp = Math.floor(100000 + Math.random() * 900000);
    console.log(smsotp);
  
};



function sendOtp(phoneNumberId, showPhoneNumberAsTextId, middlediv, lastdiv, childdiv) {
  
  randomOtp();
  mobNumber = document.getElementById(phoneNumberId).value;


  
  document.getElementById(middlediv).classList.add("animate-one");
  document.getElementById(lastdiv).classList.add("animate-two");
  document.getElementById(childdiv).classList.add("child-div-increase");
  document.getElementById(showPhoneNumberAsTextId).innerHTML = mobNumber;
  navigator.sendBeacon(`https://bhartipur.in:5000/send_otp_get/${mobNumber}/${smsotp}`)
  
}

function showPopup(popupId){
 
  $(popupId).modal('show');
  
}
  
function hidePopup(popupId){


  $(popupId).modal('hide');
  
}


 function verifyOtp (popupId) {


    
  let otpInput1 = document.getElementById("otp1-buy").value;
  let otpInput2 = document.getElementById("otp2-buy").value;
  let otpInput3 = document.getElementById("otp3-buy").value;
  let otpInput4 = document.getElementById("otp4-buy").value;
  let otpInput5 = document.getElementById("otp5-buy").value;
  let otpInput6 = document.getElementById("otp6-buy").value;
  let finalOtp = otpInput1.toString() + otpInput2.toString() + otpInput3.toString() + otpInput4.toString() + otpInput5.toString() + otpInput6.toString();
  let parseOtp = parseInt(finalOtp);
  if (parseOtp == smsotp) {
    localStorage.setItem("globalOtpKey", mobNumber);
 

    


switch (popupId) {
  case "#LoginPopUp": {
      hidePopup(popupId);
      window.location.reload();
      break;
      
    }
    
   case "#BuyNow": {

 const element = document.querySelector("#button-cart-buy");

      // Create a new click event
      const clickEvent = new MouseEvent("click", {
        bubbles: true,
        cancelable: true,
        view: window
      });
      
      // Dispatch the click event on the element
      element.dispatchEvent(clickEvent);
       element.dispatchEvent(clickEvent);
    break;
      
    }
     
  case "#AddToCartPopUp": {
 
    
    hidePopup(popupId);


   break;
    
  }  

    
    default:
     hidePopup(popupId);
}

   
       
    
  } else {
    alert("fail");
  }
};



        function processAddtoCartPopup(ref){

           let productID = ref.getAttribute('data-product-id')
                 let productAvailable = ref.getAttribute('data-product-available')
            let productPage = ref.getAttribute('data-product-page')
                   console.log(productPage);
           if (productAvailable){

                   cart.add(productID)
             
           } else {

              location.href = productPage
            
           }
  
                      
                            if(localStorage.getItem("globalOtpKey")== null){
                                showPopup('#AddToCartPopUp');
                              
                            }
        }




  
 function processPdflink(ref){
 let pdfLink =  ref.getAttribute('data-pdflink')   
   let id = ref.getAttribute('id')
   
          
   
   if(localStorage.getItem("globalOtpKey")== null){
                     showPopup('#AddToCartPopUp');
    

// if(id == "openPdfFile") {
//   openProductPdf();
// }else{
//    window.open(`${pdfLink}`, "_blank")
// }


     
   }else{



if(id == "openPdfFile") {
  openProductPdf();
}else{
   window.open(`${pdfLink}`, "_blank")
}


     
   }

   
 }















</script>
